2020-03-25 22:08:34.902  INFO 13630 --- [main] h.d.s.o.SpringCloudHmilyOrderApplication : No active profile set, falling back to default profiles: default
2020-03-25 22:08:36.522  INFO 13630 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1597 ms
2020-03-25 22:08:36.997  INFO 13630 --- [main] org.dromara.hmily.core.logo.HmilyLogo    : 


    __  __          _ __     
   / / / /___ ___  (_) /_  __
  / /_/ / __ `__ \/ / / / / /
 / __  / / / / / / / / /_/ / 
/_/ /_/_/ /_/ /_/_/_/\__, /  
                    /____/   

 :: Hmily :: (v2.0.5-RELEASE)

2020-03-25 22:08:37.987 DEBUG 13630 --- [main] .d.h.s.h.HmilyHystrixConcurrencyStrategy : HystrixEventNotifier:com.netflix.hystrix.strategy.eventnotifier.HystrixEventNotifierDefault@5621a671, HystrixMetricsPublisher:com.netflix.hystrix.strategy.metrics.HystrixMetricsPublisherDefault@2006fdaa, HystrixPropertiesStrategy:com.netflix.hystrix.strategy.properties.HystrixPropertiesStrategyDefault@21688427
2020-03-25 22:08:38.963  INFO 13630 --- [main] h.d.s.o.SpringCloudHmilyOrderApplication : Started SpringCloudHmilyOrderApplication in 4.819 seconds (JVM running for 5.461)
2020-03-25 22:09:59.685  INFO 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-03-25 22:09:59.698  INFO 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 13 ms
2020-03-25 22:10:37.108  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:11:01.512 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:11:01.547 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:11:01.557 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:11:01.513(Timestamp), 1242816260265357312(String), 1(Integer), 1(String), 2(BigDecimal), 1(Integer), 10000(String)
2020-03-25 22:11:01.559 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:11:01.565 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:11:01.575 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:11:01.576 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242816260265357312(String)
2020-03-25 22:11:01.581 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:11:02.024 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-604] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:11:02.034 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-604] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:11:02.035 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-604] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242816260265357312(String)
2020-03-25 22:11:02.038 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-604] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:11:02.038  INFO 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-604] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:11:02.044 ERROR 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#findByUserId(String) failed and no fallback available.] with root cause

com.netflix.client.ClientException: Load balancer does not have available server for client: account-service
	at com.netflix.loadbalancer.LoadBalancerContext.getServerFromLoadBalancer(LoadBalancerContext.java:483) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:184) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:180) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:94) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:42) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber$1.call(OperatorRetryWithPredicate.java:127) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.enqueue(TrampolineScheduler.java:73) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.schedule(TrampolineScheduler.java:52) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:79) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:45) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$WeakSingleProducer.request(ScalarSynchronousObservable.java:276) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Subscriber.setProducer(Subscriber.java:209) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:138) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:129) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10423) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10390) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:443) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.single(BlockingObservable.java:340) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.client.AbstractLoadBalancerAwareClient.executeWithLoadBalancer(AbstractLoadBalancerAwareClient.java:112) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at org.springframework.cloud.openfeign.ribbon.LoadBalancerFeignClient.execute(LoadBalancerFeignClient.java:63) ~[spring-cloud-openfeign-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:97) ~[feign-core-9.5.1.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:76) ~[feign-core-9.5.1.jar:na]
	at feign.hystrix.HystrixInvocationHandler$1.run(HystrixInvocationHandler.java:108) ~[feign-hystrix-9.5.1.jar:na]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:302) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:298) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:46) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:51) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:41) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorSubscribeOn$SubscribeOnSubscriber.call(OperatorSubscribeOn.java:100) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:56) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:47) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction.call(HystrixContexSchedulerAction.java:69) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55) ~[rxjava-1.3.8.jar:1.3.8]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:12:37.127  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:12:52.257  INFO 13665 --- [main] d.s.a.SpringCloudHmilyAccountApplication : No active profile set, falling back to default profiles: default
2020-03-25 22:12:53.504  INFO 13665 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1225 ms
2020-03-25 22:12:53.966  INFO 13665 --- [main] org.dromara.hmily.core.logo.HmilyLogo    : 


    __  __          _ __     
   / / / /___ ___  (_) /_  __
  / /_/ / __ `__ \/ / / / / /
 / __  / / / / / / / / /_/ / 
/_/ /_/_/ /_/ /_/_/_/\__, /  
                    /____/   

 :: Hmily :: (v2.0.5-RELEASE)

2020-03-25 22:12:55.288  INFO 13665 --- [main] d.s.a.SpringCloudHmilyAccountApplication : Started SpringCloudHmilyAccountApplication in 3.858 seconds (JVM running for 4.454)
2020-03-25 22:13:26.661 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:13:26.671 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:13:26.673 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:13:26.664(Timestamp), 1242816869085360128(String), 1(Integer), 1(String), 2(BigDecimal), 1(Integer), 10000(String)
2020-03-25 22:13:26.676 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:13:26.679 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:13:26.680 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:13:26.680 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242816869085360128(String)
2020-03-25 22:13:26.682 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:13:26.709 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-606] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:13:26.713 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-606] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:13:26.713 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-606] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242816869085360128(String)
2020-03-25 22:13:26.714 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-606] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:13:26.715  INFO 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-606] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:13:26.729 ERROR 13630 --- [http-nio-0.0.0.0-8884-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#findByUserId(String) failed and no fallback available.] with root cause

com.netflix.client.ClientException: Load balancer does not have available server for client: account-service
	at com.netflix.loadbalancer.LoadBalancerContext.getServerFromLoadBalancer(LoadBalancerContext.java:483) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:184) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:180) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:94) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:42) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber$1.call(OperatorRetryWithPredicate.java:127) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.enqueue(TrampolineScheduler.java:73) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.schedule(TrampolineScheduler.java:52) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:79) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:45) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$WeakSingleProducer.request(ScalarSynchronousObservable.java:276) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Subscriber.setProducer(Subscriber.java:209) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:138) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:129) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10423) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10390) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:443) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.single(BlockingObservable.java:340) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.client.AbstractLoadBalancerAwareClient.executeWithLoadBalancer(AbstractLoadBalancerAwareClient.java:112) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at org.springframework.cloud.openfeign.ribbon.LoadBalancerFeignClient.execute(LoadBalancerFeignClient.java:63) ~[spring-cloud-openfeign-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:97) ~[feign-core-9.5.1.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:76) ~[feign-core-9.5.1.jar:na]
	at feign.hystrix.HystrixInvocationHandler$1.run(HystrixInvocationHandler.java:108) ~[feign-hystrix-9.5.1.jar:na]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:302) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:298) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:46) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:51) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:41) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorSubscribeOn$SubscribeOnSubscriber.call(OperatorSubscribeOn.java:100) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:56) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:47) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction.call(HystrixContexSchedulerAction.java:69) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55) ~[rxjava-1.3.8.jar:1.3.8]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:14:11.671 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:14:11.673 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:14:11.676 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:14:11.672(Timestamp), 1242817057850011648(String), 1(Integer), 1(String), 2(BigDecimal), 1(Integer), 10000(String)
2020-03-25 22:14:11.678 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:14:11.678 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:14:11.679 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:14:11.679 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242817057850011648(String)
2020-03-25 22:14:11.680 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:14:26.797  INFO 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-03-25 22:14:26.808  INFO 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 11 ms
2020-03-25 22:14:26.868 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:14:26.878 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:14:26.909 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:14:39.443  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:14:53.283 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:14:53.302 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:14:53.302 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242817057850011648(String)
2020-03-25 22:14:53.301 ERROR 13630 --- [http-nio-0.0.0.0-8884-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: InventoryClient#findByProductId(String) failed and no fallback available.] with root cause

com.netflix.client.ClientException: Load balancer does not have available server for client: inventory-service
	at com.netflix.loadbalancer.LoadBalancerContext.getServerFromLoadBalancer(LoadBalancerContext.java:483) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:184) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:180) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:94) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:42) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber$1.call(OperatorRetryWithPredicate.java:127) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.enqueue(TrampolineScheduler.java:73) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.schedule(TrampolineScheduler.java:52) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:79) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:45) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$WeakSingleProducer.request(ScalarSynchronousObservable.java:276) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Subscriber.setProducer(Subscriber.java:209) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:138) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:129) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10423) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10390) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:443) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.single(BlockingObservable.java:340) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.client.AbstractLoadBalancerAwareClient.executeWithLoadBalancer(AbstractLoadBalancerAwareClient.java:112) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at org.springframework.cloud.openfeign.ribbon.LoadBalancerFeignClient.execute(LoadBalancerFeignClient.java:63) ~[spring-cloud-openfeign-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:97) ~[feign-core-9.5.1.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:76) ~[feign-core-9.5.1.jar:na]
	at feign.hystrix.HystrixInvocationHandler$1.run(HystrixInvocationHandler.java:108) ~[feign-hystrix-9.5.1.jar:na]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:302) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:298) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:46) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:51) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:41) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorSubscribeOn$SubscribeOnSubscriber.call(OperatorSubscribeOn.java:100) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:56) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:47) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction.call(HystrixContexSchedulerAction.java:69) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55) ~[rxjava-1.3.8.jar:1.3.8]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:14:53.304 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:14:53.305  INFO 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:14:55.256  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:15:14.061  INFO 13684 --- [main] s.i.SpringCloudHmilyInventoryApplication : No active profile set, falling back to default profiles: default
2020-03-25 22:15:15.553  INFO 13684 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1470 ms
2020-03-25 22:15:16.682  INFO 13684 --- [main] org.dromara.hmily.core.logo.HmilyLogo    : 


    __  __          _ __     
   / / / /___ ___  (_) /_  __
  / /_/ / __ `__ \/ / / / / /
 / __  / / / / / / / / /_/ / 
/_/ /_/_/ /_/ /_/_/_/\__, /  
                    /____/   

 :: Hmily :: (v2.0.5-RELEASE)

2020-03-25 22:15:18.398  INFO 13684 --- [main] s.i.SpringCloudHmilyInventoryApplication : Started SpringCloudHmilyInventoryApplication in 5.268 seconds (JVM running for 5.91)
2020-03-25 22:15:25.451 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:15:25.453 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:15:25.455 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:15:25.452(Timestamp), 1242817367305760768(String), 1(Integer), 1(String), 2(BigDecimal), 1(Integer), 10000(String)
2020-03-25 22:15:25.459 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:15:25.459 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:15:25.460 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:15:25.460 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242817367305760768(String)
2020-03-25 22:15:25.461 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:16:28.654 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:16:28.655 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:16:28.657 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:16:41.524  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:17:03.274  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:17:10.024 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:17:10.039 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:17:10.038 ERROR 13630 --- [http-nio-0.0.0.0-8884-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: InventoryClient#findByProductId(String) failed and no fallback available.] with root cause

com.netflix.client.ClientException: Load balancer does not have available server for client: inventory-service
	at com.netflix.loadbalancer.LoadBalancerContext.getServerFromLoadBalancer(LoadBalancerContext.java:483) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:184) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at com.netflix.loadbalancer.reactive.LoadBalancerCommand$1.call(LoadBalancerCommand.java:180) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:94) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeConcatMap.call(OnSubscribeConcatMap.java:42) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber$1.call(OperatorRetryWithPredicate.java:127) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.enqueue(TrampolineScheduler.java:73) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.schedulers.TrampolineScheduler$InnerCurrentThreadScheduler.schedule(TrampolineScheduler.java:52) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:79) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorRetryWithPredicate$SourceSubscriber.onNext(OperatorRetryWithPredicate.java:45) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$WeakSingleProducer.request(ScalarSynchronousObservable.java:276) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Subscriber.setProducer(Subscriber.java:209) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:138) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.util.ScalarSynchronousObservable$JustOnSubscribe.call(ScalarSynchronousObservable.java:129) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10423) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.subscribe(Observable.java:10390) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.blockForSingle(BlockingObservable.java:443) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.observables.BlockingObservable.single(BlockingObservable.java:340) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.client.AbstractLoadBalancerAwareClient.executeWithLoadBalancer(AbstractLoadBalancerAwareClient.java:112) ~[ribbon-loadbalancer-2.2.5.jar:2.2.5]
	at org.springframework.cloud.openfeign.ribbon.LoadBalancerFeignClient.execute(LoadBalancerFeignClient.java:63) ~[spring-cloud-openfeign-core-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:97) ~[feign-core-9.5.1.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:76) ~[feign-core-9.5.1.jar:na]
	at feign.hystrix.HystrixInvocationHandler$1.run(HystrixInvocationHandler.java:108) ~[feign-hystrix-9.5.1.jar:na]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:302) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.HystrixCommand$2.call(HystrixCommand.java:298) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:46) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:51) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDefer.call(OnSubscribeDefer.java:35) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:41) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach.call(OnSubscribeDoOnEach.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:48) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeLift.call(OnSubscribeLift.java:30) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.Observable.unsafeSubscribe(Observable.java:10327) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OperatorSubscribeOn$SubscribeOnSubscriber.call(OperatorSubscribeOn.java:100) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:56) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction$1.call(HystrixContexSchedulerAction.java:47) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContexSchedulerAction.call(HystrixContexSchedulerAction.java:69) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.schedulers.ScheduledAction.run(ScheduledAction.java:55) ~[rxjava-1.3.8.jar:1.3.8]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:17:10.043 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242817367305760768(String)
2020-03-25 22:17:10.049 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:17:10.052  INFO 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:17:18.372  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:17:32.320 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:17:32.321 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:17:32.323 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:17:32.321(Timestamp), 1242817899432914944(String), 1(Integer), 1(String), 2(BigDecimal), 1(Integer), 10000(String)
2020-03-25 22:17:32.326 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:17:32.327 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:17:32.327 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:17:32.328 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242817899432914944(String)
2020-03-25 22:17:32.330 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:17:35.803 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:17:35.803 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:17:35.804 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:17:37.159  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-03-25 22:17:37.168  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2020-03-25 22:17:37.296 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:17:37.304 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:17:37.313 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:19:11.282  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:19:18.392  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:20:26.382  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:21:04.250 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:21:04.250 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242817899432914944(String)
2020-03-25 22:21:04.255 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:21:04.255  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:21:04.424 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242817899458080768, action=1, role=1)
2020-03-25 22:21:04.459  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:21:04.460 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:21:04.460 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 22:21:04.462 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:21:18.402  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:21:19.289  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:21:49.823 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:21:52.473 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242817899458080768, action=1, role=1)
2020-03-25 22:21:52.500 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:21:52.501 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:21:52.502 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:21:52.504 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:21:55.543 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-817] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:21:55.546 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-817] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:21:55.549 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-817] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 4(Integer), 2(BigDecimal), 1242817899432914944(String)
2020-03-25 22:21:55.550 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-817] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:21:55.551  INFO 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-817] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单confirm操作完成================
2020-03-25 22:21:55.565 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:21:55.574  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存确认方法===========
2020-03-25 22:21:55.574 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==>  Preparing: update inventory set lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:21:55.575 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==> Parameters: 1(Integer), 1(String)
2020-03-25 22:21:55.577 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.confirm    : <==    Updates: 1
2020-03-25 22:21:55.608 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:21:55.614 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行confirm 付款接口===============
2020-03-25 22:21:55.615 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.m.AccountMapper.confirm      : ==>  Preparing: update account set freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:21:55.615 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.m.AccountMapper.confirm      : ==> Parameters: 2(BigDecimal), 10000(String)
2020-03-25 22:21:55.617 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.m.AccountMapper.confirm      : <==    Updates: 1
2020-03-25 22:23:09.253  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:23:09.321 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:23:18.409  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:23:27.301  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:23:40.055 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:23:40.063 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:23:09.327(Timestamp), 1242819312938528768(String), 1(Integer), 1(String), 2(BigDecimal), 2(Integer), 10000(String)
2020-03-25 22:23:40.067 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:24:23.738 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:24:23.745 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:24:23.748 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242819312938528768(String)
2020-03-25 22:24:23.758 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:25:18.419  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:25:35.310  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:27:18.432  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:27:27.446  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:27:27.488 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:27:27.498 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242819312938528768(String)
2020-03-25 22:27:27.499 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:27:27.500  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:27:27.503 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:27:27.504 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:27:27.506 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:27:29.266 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:27:29.267 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:27:29.268 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:27:43.318  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:28:08.450 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242819625049272320, action=1, role=1)
2020-03-25 22:28:08.451  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:28:08.452 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:28:08.452 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:28:08.454 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:28:08.460 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:28:08.468 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242819625049272320, action=1, role=1)
2020-03-25 22:28:08.469 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:28:08.470 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:28:08.471 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:28:08.472 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:28:08.486 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-825] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:28:08.486 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-825] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:28:08.487 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-825] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 4(Integer), 2(BigDecimal), 1242819312938528768(String)
2020-03-25 22:28:08.488 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-825] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:28:08.489  INFO 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-825] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单confirm操作完成================
2020-03-25 22:28:08.506 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:28:08.507  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存确认方法===========
2020-03-25 22:28:08.507 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==>  Preparing: update inventory set lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:28:08.508 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==> Parameters: 2(Integer), 1(String)
2020-03-25 22:28:08.509 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.confirm    : <==    Updates: 1
2020-03-25 22:28:08.528 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:28:08.528 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行confirm 付款接口===============
2020-03-25 22:28:08.528 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.AccountMapper.confirm      : ==>  Preparing: update account set freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:28:08.529 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.AccountMapper.confirm      : ==> Parameters: 2(BigDecimal), 10000(String)
2020-03-25 22:28:08.530 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.AccountMapper.confirm      : <==    Updates: 1
2020-03-25 22:29:18.443  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:29:23.120 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:29:45.103  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:29:45.146 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:29:45.157 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:29:23.123(Timestamp), 1242820880752586752(String), 1(Integer), 1(String), 3(BigDecimal), 3(Integer), 10000(String)
2020-03-25 22:29:45.163 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:29:51.326  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:29:54.072 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:29:54.077 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:29:54.079 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 3(BigDecimal), 1242820880752586752(String)
2020-03-25 22:29:54.082 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:30:56.401 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:30:56.403 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:30:56.405 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:31:05.122 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:31:05.125 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:31:05.127 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:31:18.443  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:31:35.415 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242821010570489856, action=1, role=1)
2020-03-25 22:31:35.417  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:31:35.417 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:31:35.418 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:31:35.421 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:31:48.500  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:31:59.327  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:32:08.800 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:33:18.451  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:34:07.339  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:34:44.639  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:34:44.656 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242821010570489856, action=1, role=1)
2020-03-25 22:34:44.663 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:34:44.664 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 3(BigDecimal), 1242820880752586752(String)
2020-03-25 22:34:44.665 DEBUG 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:34:44.665  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:34:44.671 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:34:44.672  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:34:44.673 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:34:44.673 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:34:44.674 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:35:18.462  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:36:13.120 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:36:22.170  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:36:22.172 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242821010570489856, action=1, role=1)
2020-03-25 22:36:22.175 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:36:22.184 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:36:22.188 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 3(BigDecimal), 3(BigDecimal), 10000(String)
2020-03-25 22:36:22.186 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:36:22.190 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:36:22.190 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 3(BigDecimal), 3(BigDecimal), 10000(String)
2020-03-25 22:36:22.201 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:37:18.470  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:37:30.123 ERROR 13665 --- [hmilyTransaction-hmily-log-disruptor5-21] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242821010570489856' for key 'PRIMARY'
2020-03-25 22:38:30.189  INFO 13665 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:39:18.482  INFO 13684 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:40:31.391  INFO 13630 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:40:31.399 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:40:31.399 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:40:31.399 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:40:31.416 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:40:31.416 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-828] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:40:31.421 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:40:31.401(Timestamp), 1242823683713675264(String), 1(Integer), 1(String), 3(BigDecimal), 3(Integer), 10000(String)
2020-03-25 22:40:31.422 ERROR 13630 --- [http-nio-0.0.0.0-8884-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:40:31.429 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:40:31.430 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:40:31.433 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:40:31.434 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:40:31.435 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:40:31.435 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 3(BigDecimal), 1242823683713675264(String)
2020-03-25 22:40:31.436 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:40:31.405(Timestamp), 1242823683730452480(String), 1(Integer), 1(String), 4(BigDecimal), 3(Integer), 10000(String)
2020-03-25 22:40:31.437 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:40:31.402(Timestamp), 1242823683717869568(String), 1(Integer), 1(String), 3(BigDecimal), 3(Integer), 10000(String)
2020-03-25 22:40:31.442 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-828] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:40:31.445 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:40:31.445 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-828] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 3(BigDecimal), 1242820880752586752(String)
2020-03-25 22:40:31.445 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:40:31.445 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:40:31.446 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:40:31.446 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:40:31.446 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:40:31.446 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:40:31.446 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 3(BigDecimal), 1242823683717869568(String)
2020-03-25 22:40:31.446 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 4(BigDecimal), 1242823683730452480(String)
2020-03-25 22:40:31.473 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-828] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:40:31.477  INFO 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-828] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:40:31.479 ERROR 13630 --- [DiscoveryClient-HeartbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.SocketException: Connection reset
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:89) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:852) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1399) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]
Caused by: java.net.SocketException: Connection reset
	at java.net.SocketInputStream.read(SocketInputStream.java:210) ~[na:1.8.0_121]
	at java.net.SocketInputStream.read(SocketInputStream.java:141) ~[na:1.8.0_121]
	at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:161) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:82) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:278) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:286) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:257) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:230) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.10.jar:4.4.10]
	at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:684) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:486) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 28 common frames omitted

2020-03-25 22:40:31.490 ERROR 13630 --- [DiscoveryClient-HeartbeatExecutor-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:852) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1399) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 29 common frames omitted

2020-03-25 22:40:31.493 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:40:31.494 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:40:31.494 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:40:31.495 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:40:31.496  INFO 13630 --- [Thread-8] o.d.h.c.s.impl.HmilyInitServiceImpl      : hmily shutdown now
2020-03-25 22:40:31.497 ERROR 13630 --- [DiscoveryClient-HeartbeatExecutor-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDER-SERVICE/192.168.0.102:order-service:8884 - was unable to send heartbeat!

com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.renew(DiscoveryClient.java:852) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient$HeartbeatThread.run(DiscoveryClient.java:1399) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:40:31.502 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:40:31.504 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:40:31.504 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:40:31.504 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:40:31.504 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:40:31.506 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:40:31.510 DEBUG 13665 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:40:31.518 ERROR 13630 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 31 common frames omitted

2020-03-25 22:40:31.526  INFO 13665 --- [Thread-8] o.d.h.c.s.impl.HmilyInitServiceImpl      : hmily shutdown now
2020-03-25 22:40:31.534 ERROR 13630 --- [Thread-16] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.delete(WebResource.java:591) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.cancel(AbstractJerseyEurekaHttpClient.java:76) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:923) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:901) [eureka-client-1.9.2.jar:1.9.2]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:246) [spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:494) [spring-cloud-context-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at com.sun.proxy.$Proxy128.shutdown(Unknown Source) [na:na]
	at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.close(EurekaRegistration.java:207) [spring-cloud-netflix-eureka-client-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:337) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:271) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1052) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1059) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1035) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1011) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:931) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 46 common frames omitted

2020-03-25 22:40:31.537 ERROR 13630 --- [Thread-16] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ORDER-SERVICE/192.168.0.102:order-service:8884 - de-registration failedCannot execute request on any known server

com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:923) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:901) [eureka-client-1.9.2.jar:1.9.2]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:246) [spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:494) [spring-cloud-context-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at com.sun.proxy.$Proxy128.shutdown(Unknown Source) [na:na]
	at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.close(EurekaRegistration.java:207) [spring-cloud-netflix-eureka-client-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:337) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:271) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1052) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1059) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1035) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1011) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:931) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]

2020-03-25 22:40:31.540 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:40:31.540 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:40:31.541 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:40:31.541 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:40:31.541 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:40:31.542 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:40:31.548 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:40:31.552 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:40:31.553 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:40:31.557 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:40:31.568 ERROR 13665 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:89) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 30 common frames omitted

2020-03-25 22:40:31.571 ERROR 13665 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 31 common frames omitted

2020-03-25 22:40:31.578 ERROR 13665 --- [Thread-14] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.delete(WebResource.java:591) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.cancel(AbstractJerseyEurekaHttpClient.java:76) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:923) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:901) [eureka-client-1.9.2.jar:1.9.2]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:246) [spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:494) [spring-cloud-context-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at com.sun.proxy.$Proxy103.shutdown(Unknown Source) [na:na]
	at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.close(EurekaRegistration.java:207) [spring-cloud-netflix-eureka-client-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:337) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:271) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1052) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1059) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1035) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1011) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:931) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 46 common frames omitted

2020-03-25 22:40:31.579 ERROR 13665 --- [Thread-14] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_ACCOUNT-SERVICE/192.168.0.102:account-service:8885 - de-registration failedCannot execute request on any known server

com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:923) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:901) [eureka-client-1.9.2.jar:1.9.2]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:246) [spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:494) [spring-cloud-context-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at com.sun.proxy.$Proxy103.shutdown(Unknown Source) [na:na]
	at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.close(EurekaRegistration.java:207) [spring-cloud-netflix-eureka-client-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:337) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:271) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1052) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1059) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1035) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1011) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:931) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]

2020-03-25 22:40:31.591 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242823683902418944, action=1, role=1)
2020-03-25 22:40:31.591 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242823683902418945, action=1, role=1)
2020-03-25 22:40:31.591 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242823683852087296, action=1, role=1)
2020-03-25 22:40:31.592  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:40:31.592  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:40:31.592 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:40:31.592 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:40:31.592 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:40:31.592  INFO 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:40:31.592 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:40:31.594 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:40:31.595 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:40:31.602 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:40:31.602 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:40:31.608 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:40:31.608 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-10] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:40:31.610  INFO 13684 --- [Thread-10] o.d.h.c.s.impl.HmilyInitServiceImpl      : hmily shutdown now
2020-03-25 22:40:31.612 DEBUG 13684 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:40:31.617 DEBUG 13630 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:40:31.676 ERROR 13684 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:89) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 30 common frames omitted

2020-03-25 22:40:31.684 ERROR 13684 --- [DiscoveryClient-InstanceInfoReplicator-0] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.post(WebResource.java:570) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.register(AbstractJerseyEurekaHttpClient.java:56) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$1.execute(EurekaHttpClientDecorator.java:59) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.register(EurekaHttpClientDecorator.java:56) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.register(DiscoveryClient.java:829) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator.run(InstanceInfoReplicator.java:121) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.InstanceInfoReplicator$1.run(InstanceInfoReplicator.java:101) [eureka-client-1.9.2.jar:1.9.2]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266) [na:1.8.0_121]
	at java.util.concurrent.FutureTask.run(FutureTask.java) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 31 common frames omitted

2020-03-25 22:40:31.714 ERROR 13684 --- [Thread-17] c.n.d.s.t.d.RedirectingEurekaHttpClient  : Request execution error

com.sun.jersey.api.client.ClientHandlerException: java.net.ConnectException: Connection refused (Connection refused)
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:187) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.filter.GZIPContentEncodingFilter.handle(GZIPContentEncodingFilter.java:123) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.EurekaIdentityHeaderFilter.handle(EurekaIdentityHeaderFilter.java:27) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.sun.jersey.api.client.Client.handle(Client.java:652) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.handle(WebResource.java:682) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource.access$200(WebResource.java:74) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.sun.jersey.api.client.WebResource$Builder.delete(WebResource.java:591) ~[jersey-client-1.19.1.jar:1.19.1]
	at com.netflix.discovery.shared.transport.jersey.AbstractJerseyEurekaHttpClient.cancel(AbstractJerseyEurekaHttpClient.java:76) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.MetricsCollectingEurekaHttpClient.execute(MetricsCollectingEurekaHttpClient.java:73) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.executeOnNewServer(RedirectingEurekaHttpClient.java:118) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RedirectingEurekaHttpClient.execute(RedirectingEurekaHttpClient.java:79) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:120) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:923) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:901) [eureka-client-1.9.2.jar:1.9.2]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:246) [spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:494) [spring-cloud-context-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at com.sun.proxy.$Proxy120.shutdown(Unknown Source) [na:na]
	at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.close(EurekaRegistration.java:207) [spring-cloud-netflix-eureka-client-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:337) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:271) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1052) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1059) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1035) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1011) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:931) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
Caused by: java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) ~[na:1.8.0_121]
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) ~[na:1.8.0_121]
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) ~[na:1.8.0_121]
	at java.net.Socket.connect(Socket.java:589) ~[na:1.8.0_121]
	at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:121) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:144) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:134) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:610) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:445) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:835) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:118) ~[httpclient-4.5.6.jar:4.5.6]
	at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.6.jar:4.5.6]
	at com.sun.jersey.client.apache4.ApacheHttpClient4Handler.handle(ApacheHttpClient4Handler.java:173) ~[jersey-apache-client4-1.19.1.jar:1.19.1]
	... 46 common frames omitted

2020-03-25 22:40:31.722 ERROR 13684 --- [Thread-17] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_INVENTORY-SERVICE/192.168.0.102:inventory-service:8883 - de-registration failedCannot execute request on any known server

com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server
	at com.netflix.discovery.shared.transport.decorator.RetryableEurekaHttpClient.execute(RetryableEurekaHttpClient.java:112) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator$2.execute(EurekaHttpClientDecorator.java:74) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.SessionedEurekaHttpClient.execute(SessionedEurekaHttpClient.java:77) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.shared.transport.decorator.EurekaHttpClientDecorator.cancel(EurekaHttpClientDecorator.java:71) ~[eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.unregister(DiscoveryClient.java:923) [eureka-client-1.9.2.jar:1.9.2]
	at com.netflix.discovery.DiscoveryClient.shutdown(DiscoveryClient.java:901) [eureka-client-1.9.2.jar:1.9.2]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:246) [spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.cloud.context.scope.GenericScope$LockedScopedProxyFactoryBean.invoke(GenericScope.java:494) [spring-cloud-context-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:212) [spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at com.sun.proxy.$Proxy120.shutdown(Unknown Source) [na:na]
	at org.springframework.cloud.netflix.eureka.serviceregistry.EurekaRegistration.close(EurekaRegistration.java:207) [spring-cloud-netflix-eureka-client-2.0.0.RELEASE.jar:2.0.0.RELEASE]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.invokeCustomDestroyMethod(DisposableBeanAdapter.java:337) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:271) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:571) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:543) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingleton(DefaultListableBeanFactory.java:1052) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:504) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.destroySingletons(DefaultListableBeanFactory.java:1059) [spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1035) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1011) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:931) [spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]

2020-03-25 22:40:31.840 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:40:31.850 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-826] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:40:31.868 DEBUG 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-831] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:40:31.910 ERROR 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-831] o.d.h.c.s.e.HmilyTransactionExecutor     : execute cancel ex:{}

org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ymentServiceImpl' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:772) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1221) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:294) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:273) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getByName(SpringBeanUtils.java:72) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getBean(SpringBeanUtils.java:64) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.execute(HmilyReflector.java:66) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.executor(HmilyReflector.java:54) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.executor.HmilyTransactionExecutor.cancel(HmilyTransactionExecutor.java:194) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.handler.StarterHmilyTransactionHandler.lambda$handler$0(StarterHmilyTransactionHandler.java:77) [hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:28) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:13) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:40) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:29) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.lmax.disruptor.WorkProcessor.run(WorkProcessor.java:143) ~[disruptor-3.4.0.jar:na]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]

2020-03-25 22:40:31.910 ERROR 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-826] o.d.h.c.s.e.HmilyTransactionExecutor     : execute cancel ex:{}

org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ymentServiceImpl' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:772) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1221) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:294) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:273) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getByName(SpringBeanUtils.java:72) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getBean(SpringBeanUtils.java:64) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.execute(HmilyReflector.java:66) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.executor(HmilyReflector.java:54) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.executor.HmilyTransactionExecutor.cancel(HmilyTransactionExecutor.java:194) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.handler.StarterHmilyTransactionHandler.lambda$handler$0(StarterHmilyTransactionHandler.java:77) [hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:28) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:13) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:40) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:29) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.lmax.disruptor.WorkProcessor.run(WorkProcessor.java:143) ~[disruptor-3.4.0.jar:na]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]

2020-03-25 22:40:31.910 ERROR 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.c.s.e.HmilyTransactionExecutor     : execute cancel ex:{}

org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ymentServiceImpl' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:772) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1221) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:294) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:273) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getByName(SpringBeanUtils.java:72) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getBean(SpringBeanUtils.java:64) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.execute(HmilyReflector.java:66) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.executor(HmilyReflector.java:54) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.executor.HmilyTransactionExecutor.cancel(HmilyTransactionExecutor.java:194) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.handler.StarterHmilyTransactionHandler.lambda$handler$0(StarterHmilyTransactionHandler.java:77) [hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:28) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:13) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:40) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:29) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.lmax.disruptor.WorkProcessor.run(WorkProcessor.java:143) ~[disruptor-3.4.0.jar:na]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]

2020-03-25 22:40:31.927 ERROR 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-831] o.d.h.c.s.e.HmilyTransactionExecutor     : execute cancel ex:{}

java.lang.reflect.InvocationTargetException: null
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:230) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:256) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.dromara.hmily.core.reflect.HmilyReflector.execute(HmilyReflector.java:67) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.executor(HmilyReflector.java:54) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.executor.HmilyTransactionExecutor.cancel(HmilyTransactionExecutor.java:194) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.handler.StarterHmilyTransactionHandler.lambda$handler$0(StarterHmilyTransactionHandler.java:77) [hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:28) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:13) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:40) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:29) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.lmax.disruptor.WorkProcessor.run(WorkProcessor.java:143) ~[disruptor-3.4.0.jar:na]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ilyTransactionExecutor' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:772) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1221) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:294) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:273) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getByName(SpringBeanUtils.java:72) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getBean(SpringBeanUtils.java:64) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.springcloud.feign.HmilyFeignHandler.invoke(HmilyFeignHandler.java:61) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.sun.proxy.$Proxy115.decrease(Unknown Source) ~[na:na]
	... 16 common frames omitted

2020-03-25 22:40:31.928 ERROR 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-826] o.d.h.c.s.e.HmilyTransactionExecutor     : execute cancel ex:{}

java.lang.reflect.InvocationTargetException: null
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:230) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:256) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.dromara.hmily.core.reflect.HmilyReflector.execute(HmilyReflector.java:67) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.executor(HmilyReflector.java:54) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.executor.HmilyTransactionExecutor.cancel(HmilyTransactionExecutor.java:194) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.handler.StarterHmilyTransactionHandler.lambda$handler$0(StarterHmilyTransactionHandler.java:77) [hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:28) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:13) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:40) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:29) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.lmax.disruptor.WorkProcessor.run(WorkProcessor.java:143) ~[disruptor-3.4.0.jar:na]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ilyTransactionExecutor' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:772) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1221) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:294) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:273) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getByName(SpringBeanUtils.java:72) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getBean(SpringBeanUtils.java:64) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.springcloud.feign.HmilyFeignHandler.invoke(HmilyFeignHandler.java:61) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.sun.proxy.$Proxy115.decrease(Unknown Source) ~[na:na]
	... 16 common frames omitted

2020-03-25 22:40:31.928 ERROR 13630 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.c.s.e.HmilyTransactionExecutor     : execute cancel ex:{}

java.lang.reflect.InvocationTargetException: null
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_121]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_121]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_121]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_121]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:230) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:256) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.dromara.hmily.core.reflect.HmilyReflector.execute(HmilyReflector.java:67) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.reflect.HmilyReflector.executor(HmilyReflector.java:54) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.executor.HmilyTransactionExecutor.cancel(HmilyTransactionExecutor.java:194) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.service.handler.StarterHmilyTransactionHandler.lambda$handler$0(StarterHmilyTransactionHandler.java:77) [hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:28) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.handler.HmilyConsumerTransactionDataHandler.executor(HmilyConsumerTransactionDataHandler.java:13) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:40) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.disruptor.DisruptorConsumer.onEvent(DisruptorConsumer.java:29) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.lmax.disruptor.WorkProcessor.run(WorkProcessor.java:143) ~[disruptor-3.4.0.jar:na]
	at java.lang.Thread.run(Thread.java:745) ~[na:1.8.0_121]
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'ilyTransactionExecutor' available
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:772) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1221) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:294) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:273) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:204) ~[spring-beans-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1089) ~[spring-context-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getByName(SpringBeanUtils.java:72) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.core.helper.SpringBeanUtils.getBean(SpringBeanUtils.java:64) ~[hmily-core-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at org.dromara.hmily.springcloud.feign.HmilyFeignHandler.invoke(HmilyFeignHandler.java:61) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.sun.proxy.$Proxy115.decrease(Unknown Source) ~[na:na]
	... 16 common frames omitted

2020-03-25 22:42:49.184  INFO 13868 --- [main] d.s.a.SpringCloudHmilyAccountApplication : No active profile set, falling back to default profiles: default
2020-03-25 22:42:50.358  INFO 13868 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1155 ms
2020-03-25 22:42:50.815  INFO 13868 --- [main] org.dromara.hmily.core.logo.HmilyLogo    : 


    __  __          _ __     
   / / / /___ ___  (_) /_  __
  / /_/ / __ `__ \/ / / / / /
 / __  / / / / / / / / /_/ / 
/_/ /_/_/ /_/ /_/_/_/\__, /  
                    /____/   

 :: Hmily :: (v2.0.5-RELEASE)

2020-03-25 22:42:52.169  INFO 13868 --- [main] d.s.a.SpringCloudHmilyAccountApplication : Started SpringCloudHmilyAccountApplication in 3.872 seconds (JVM running for 4.485)
2020-03-25 22:43:44.459  INFO 13876 --- [main] s.i.SpringCloudHmilyInventoryApplication : No active profile set, falling back to default profiles: default
2020-03-25 22:43:45.873  INFO 13876 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1396 ms
2020-03-25 22:43:46.861  INFO 13876 --- [main] org.dromara.hmily.core.logo.HmilyLogo    : 


    __  __          _ __     
   / / / /___ ___  (_) /_  __
  / /_/ / __ `__ \/ / / / / /
 / __  / / / / / / / / /_/ / 
/_/ /_/_/ /_/ /_/_/_/\__, /  
                    /____/   

 :: Hmily :: (v2.0.5-RELEASE)

2020-03-25 22:43:48.379  INFO 13876 --- [main] s.i.SpringCloudHmilyInventoryApplication : Started SpringCloudHmilyInventoryApplication in 4.846 seconds (JVM running for 5.502)
2020-03-25 22:44:01.521  INFO 13880 --- [main] h.d.s.o.SpringCloudHmilyOrderApplication : No active profile set, falling back to default profiles: default
2020-03-25 22:44:03.041  INFO 13880 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1502 ms
2020-03-25 22:44:03.516  INFO 13880 --- [main] org.dromara.hmily.core.logo.HmilyLogo    : 


    __  __          _ __     
   / / / /___ ___  (_) /_  __
  / /_/ / __ `__ \/ / / / / /
 / __  / / / / / / / / /_/ / 
/_/ /_/_/ /_/ /_/_/_/\__, /  
                    /____/   

 :: Hmily :: (v2.0.5-RELEASE)

2020-03-25 22:44:04.549 DEBUG 13880 --- [main] .d.h.s.h.HmilyHystrixConcurrencyStrategy : HystrixEventNotifier:com.netflix.hystrix.strategy.eventnotifier.HystrixEventNotifierDefault@14ad42, HystrixMetricsPublisher:com.netflix.hystrix.strategy.metrics.HystrixMetricsPublisherDefault@608b906d, HystrixPropertiesStrategy:com.netflix.hystrix.strategy.properties.HystrixPropertiesStrategyDefault@173cfb01
2020-03-25 22:44:05.485  INFO 13880 --- [main] h.d.s.o.SpringCloudHmilyOrderApplication : Started SpringCloudHmilyOrderApplication in 4.892 seconds (JVM running for 5.509)
2020-03-25 22:44:52.138  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:44:52.255 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 22:45:48.358  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:45:48.443  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:45:48.454 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:45:48.461 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:45:48.462 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:45:48.465  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:45:48.465 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:45:48.466 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:45:48.466 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:45:48.468  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:45:48.469 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:45:48.469 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:45:48.470 DEBUG 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:45:53.090 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:45:53.114 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 3(BigDecimal), 3(BigDecimal), 10000(String)
2020-03-25 22:45:53.118 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 22:46:03.654  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:46:03.962 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:46:03.971 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 3(BigDecimal), 1242823683713675264(String)
2020-03-25 22:46:03.973 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:46:03.974  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:46:04.377  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-03-25 22:46:04.388  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 11 ms
2020-03-25 22:46:04.522 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:46:04.551 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:46:04.551 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 4(BigDecimal), 1242823683730452480(String)
2020-03-25 22:46:04.552 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:46:04.552  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:46:04.567 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:46:04.590 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:46:04.591 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 3(BigDecimal), 1242823683717869568(String)
2020-03-25 22:46:04.591 DEBUG 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:46:04.592  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:46:04.597 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:47:48.475  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:47:52.095  INFO 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-03-25 22:47:52.104  INFO 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2020-03-25 22:47:55.106 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:47:55.113 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:47:55.116 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:47:55.107(Timestamp), 1242825544752885760(String), 1(Integer), 1(String), 4(BigDecimal), 3(Integer), 10000(String)
2020-03-25 22:47:55.117 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:47:55.120 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:47:55.126 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:47:55.127 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 4(BigDecimal), 1242825544752885760(String)
2020-03-25 22:47:55.130 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:47:55.930  INFO 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-03-25 22:47:55.945  INFO 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 15 ms
2020-03-25 22:47:55.993 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:47:55.993 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:47:56.008 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:47:56.075 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:47:56.075 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:47:56.085 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:47:56.126 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242825544807411712, action=1, role=1)
2020-03-25 22:47:56.130  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:47:56.130 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:47:56.130 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:47:56.132 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:47:56.145 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:47:56.199 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242825544807411712, action=1, role=1)
2020-03-25 22:47:57.228 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-810] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:47:57.229 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-810] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:47:57.230 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-810] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 4(BigDecimal), 1242825544752885760(String)
2020-03-25 22:47:57.231 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-810] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:47:57.232  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-810] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:47:57.252 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:47:57.253  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:47:57.254 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:47:57.255 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:47:57.257 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:47:57.260 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:47:57.266 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:47:57.267 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242825544807411712, action=1, role=1)
2020-03-25 22:47:57.267 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 4(BigDecimal), 4(BigDecimal), 10000(String)
2020-03-25 22:47:57.271 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:47:57.274 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:47:57.928 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:47:57.930 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:47:57.931 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 4(BigDecimal), 4(BigDecimal), 10000(String)
2020-03-25 22:47:57.938 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:47:58.005 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor12-19] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242825544807411712' for key 'PRIMARY'
2020-03-25 22:48:01.128  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:48:04.612  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:48:30.595 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:48:30.597 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:48:30.597 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:48:30.596(Timestamp), 1242825693600346112(String), 1(Integer), 1(String), 4(BigDecimal), 3(Integer), 10000(String)
2020-03-25 22:48:30.601 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:48:30.601 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:48:30.602 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:48:30.602 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 4(BigDecimal), 1242825693600346112(String)
2020-03-25 22:48:30.621 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:48:30.782 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:48:30.782 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:48:30.783 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:48:30.796 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:48:30.797 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:48:30.798 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:48:30.820 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242825693621317632, action=1, role=1)
2020-03-25 22:48:30.820  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:48:30.821 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:48:30.821 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:48:30.822 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:48:30.826 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:48:30.843 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242825693621317632, action=1, role=1)
2020-03-25 22:48:31.068 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:48:31.069 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:48:31.070 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 4(BigDecimal), 4(BigDecimal), 10000(String)
2020-03-25 22:48:31.072 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:48:31.081 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-814] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:48:31.082 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-814] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:48:31.083 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-814] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 4(Integer), 4(BigDecimal), 1242825693600346112(String)
2020-03-25 22:48:31.086 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-814] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:48:31.087  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-814] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单confirm操作完成================
2020-03-25 22:48:31.100 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:48:31.101  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存确认方法===========
2020-03-25 22:48:31.101 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==>  Preparing: update inventory set lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:48:31.102 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==> Parameters: 3(Integer), 1(String)
2020-03-25 22:48:31.106 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.confirm    : <==    Updates: 1
2020-03-25 22:48:31.117 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:48:31.118 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行confirm 付款接口===============
2020-03-25 22:48:31.207 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.AccountMapper.confirm      : ==>  Preparing: update account set freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:48:31.207 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.AccountMapper.confirm      : ==> Parameters: 4(BigDecimal), 10000(String)
2020-03-25 22:48:31.208 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.AccountMapper.confirm      : <==    Updates: 1
2020-03-25 22:49:48.483  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:50:04.617  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:50:09.138  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:50:20.837 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:50:20.838 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:50:20.839 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:50:20.838(Timestamp), 1242826155988807680(String), 1(Integer), 1(String), 2(BigDecimal), 2(Integer), 10000(String)
2020-03-25 22:50:20.844 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:50:20.845 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:50:20.845 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:50:20.845 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242826155988807680(String)
2020-03-25 22:50:20.847 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:50:21.004 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:50:21.005 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:50:21.006 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:50:21.018 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:50:21.019 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:50:21.020 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:50:21.031 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242826156018167808, action=1, role=1)
2020-03-25 22:50:21.032  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:50:21.032 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:50:21.033 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:50:21.034 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:50:21.039 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:50:21.054 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242826156018167808, action=1, role=1)
2020-03-25 22:50:21.259 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:50:21.259 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:50:21.260 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:50:21.261 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:50:21.272 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-821] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:50:21.273 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-821] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:50:21.273 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-821] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 4(Integer), 2(BigDecimal), 1242826155988807680(String)
2020-03-25 22:50:21.282 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-821] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:50:21.282  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-821] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单confirm操作完成================
2020-03-25 22:50:21.295 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:50:21.295  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存确认方法===========
2020-03-25 22:50:21.296 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==>  Preparing: update inventory set lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:50:21.297 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==> Parameters: 2(Integer), 1(String)
2020-03-25 22:50:21.301 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.confirm    : <==    Updates: 1
2020-03-25 22:50:21.315 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:50:21.316 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行confirm 付款接口===============
2020-03-25 22:50:21.406 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.AccountMapper.confirm      : ==>  Preparing: update account set freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:50:21.407 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.AccountMapper.confirm      : ==> Parameters: 2(BigDecimal), 10000(String)
2020-03-25 22:50:21.409 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.AccountMapper.confirm      : <==    Updates: 1
2020-03-25 22:50:44.392 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:50:46.025 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:50:46.039 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:50:44.394(Timestamp), 1242826254789832704(String), 1(Integer), 1(String), 2(BigDecimal), 2(Integer), 10000(String)
2020-03-25 22:50:46.042 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:50:47.987 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:50:47.992 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:50:47.995 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242826254789832704(String)
2020-03-25 22:50:47.998 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:50:52.615 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:50:52.615 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:50:52.616 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:50:54.022 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:50:54.023 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:50:54.024 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:50:56.918 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242826269868355584, action=1, role=1)
2020-03-25 22:50:56.918  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:50:56.919 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:50:56.919 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:50:56.921 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:51:06.562 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:51:06.572 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242826269868355584, action=1, role=1)
2020-03-25 22:51:07.586 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:51:07.590 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:51:07.589 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:51:07.590 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242826254789832704(String)
2020-03-25 22:51:07.592 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:51:07.593  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-819] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:51:07.600 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:51:07.600  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:51:07.601 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:51:07.602 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:51:07.613 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:51:34.177 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:51:34.183 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:51:34.184 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242826269868355584, action=1, role=1)
2020-03-25 22:51:34.184 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:51:48.215 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:51:48.217 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:51:48.217 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:51:48.218 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:51:48.220 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:51:48.220 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor15-22] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242826269868355584' for key 'PRIMARY'
2020-03-25 22:51:48.491  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:52:04.629  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:52:17.148  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:52:17.157 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 22:53:24.371 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:53:24.373 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 4(BigDecimal), 4(BigDecimal), 10000(String)
2020-03-25 22:53:24.375 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 22:53:48.501  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:54:04.639  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:55:00.923 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:55:00.925 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:55:00.927 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:55:00.924(Timestamp), 1242827330754637824(String), 1(Integer), 1(String), 2(BigDecimal), 2(Integer), 10000(String)
2020-03-25 22:55:00.930 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:55:00.931 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:55:00.931 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:55:00.931 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242827330754637824(String)
2020-03-25 22:55:00.933 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:55:00.939 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:55:00.939 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:55:00.940 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:55:00.952 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:55:00.954 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:55:00.956 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:55:00.968 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242827330783997952, action=1, role=1)
2020-03-25 22:55:00.968  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:55:00.968 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:55:00.969 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:55:00.971 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:55:00.976 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:55:00.983 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242827330783997952, action=1, role=1)
2020-03-25 22:55:01.998 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-820] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:55:01.998 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:55:01.999 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-820] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:55:02.000 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-820] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242827330754637824(String)
2020-03-25 22:55:02.004 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-820] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:55:02.004  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-820] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:55:02.015 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:55:02.016  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:55:02.018 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:55:02.018 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:55:02.023 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:55:07.558 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:55:07.559 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:55:07.560 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242827330783997952, action=1, role=1)
2020-03-25 22:55:11.540 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:55:11.540 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:55:11.541 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:55:11.541 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:55:11.544 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:55:11.545 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:55:11.546 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor15-22] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242827330783997952' for key 'PRIMARY'
2020-03-25 22:55:32.372  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:55:32.381 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 22:55:37.754 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:55:37.754 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:55:37.756 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 22:55:48.501  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:56:04.637  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:57:08.079 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:57:08.081 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:57:08.082 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:57:08.08(Timestamp), 1242827864085557248(String), 1(Integer), 1(String), 2(BigDecimal), 2(Integer), 10000(String)
2020-03-25 22:57:08.084 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:57:08.085 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:57:08.086 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:57:08.088 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242827864085557248(String)
2020-03-25 22:57:08.089 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:57:08.093 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:57:08.094 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:57:08.095 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:57:08.107 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:57:08.108 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:57:08.111 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:57:08.122 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242827864110723072, action=1, role=1)
2020-03-25 22:57:08.125  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:57:08.126 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:57:08.126 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:57:08.131 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:57:08.135 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:57:08.142 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242827864110723072, action=1, role=1)
2020-03-25 22:57:09.149 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-823] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:57:09.150 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-823] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:57:09.150 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 22:57:09.150 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-823] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 2(BigDecimal), 1242827864085557248(String)
2020-03-25 22:57:09.152 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-823] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:57:09.152  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-823] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 22:57:09.159 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 22:57:09.160  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 22:57:09.161 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:57:09.161 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:57:09.162 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 22:57:09.991 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:57:09.992 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:57:09.993 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:57:09.993 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242827864110723072, action=1, role=1)
2020-03-25 22:57:10.756 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:57:10.756 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:57:10.759 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:57:10.762 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:57:10.765 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:57:10.767 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor3-23] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242827864110723072' for key 'PRIMARY'
2020-03-25 22:57:45.758  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:57:48.510  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:57:51.842 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:57:51.843 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:57:51.843 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:57:51.842(Timestamp), 1242828047636688896(String), 1(Integer), 1(String), 2(BigDecimal), 2(Integer), 10000(String)
2020-03-25 22:57:51.845 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:57:51.846 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:57:51.847 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:57:51.849 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 2(BigDecimal), 1242828047636688896(String)
2020-03-25 22:57:51.851 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:57:51.855 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:57:51.855 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:57:51.856 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:57:51.864 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:57:51.865 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:57:51.866 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:57:51.879 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242828047653466112, action=1, role=1)
2020-03-25 22:57:51.879  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:57:51.880 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:57:51.881 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 2(Integer), 2(Integer), 1(String)
2020-03-25 22:57:51.883 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:57:51.887 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-8] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:57:51.893 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242828047653466112, action=1, role=1)
2020-03-25 22:57:51.894 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:57:51.895 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:57:51.895 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 22:57:51.896 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:57:51.902 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-818] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:57:51.903 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-818] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:57:51.903 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-818] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 4(Integer), 2(BigDecimal), 1242828047636688896(String)
2020-03-25 22:57:51.905 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-818] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:57:51.905  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-818] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单confirm操作完成================
2020-03-25 22:57:51.912 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:57:51.912  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存确认方法===========
2020-03-25 22:57:51.913 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==>  Preparing: update inventory set lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:57:51.913 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==> Parameters: 2(Integer), 1(String)
2020-03-25 22:57:51.915 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.confirm    : <==    Updates: 1
2020-03-25 22:57:51.931 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:57:51.931 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行confirm 付款接口===============
2020-03-25 22:57:51.931 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.AccountMapper.confirm      : ==>  Preparing: update account set freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:57:51.931 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.AccountMapper.confirm      : ==> Parameters: 2(BigDecimal), 10000(String)
2020-03-25 22:57:51.933 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.AccountMapper.confirm      : <==    Updates: 1
2020-03-25 22:58:04.650  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:58:34.288 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 22:58:34.289 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 22:58:34.289 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 22:58:34.288(Timestamp), 1242828225668116480(String), 1(Integer), 1(String), 3(BigDecimal), 3(Integer), 10000(String)
2020-03-25 22:58:34.291 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 22:58:34.292 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 22:58:34.293 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:58:34.293 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 3(BigDecimal), 1242828225668116480(String)
2020-03-25 22:58:34.295 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:58:34.299 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 22:58:34.299 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 22:58:34.301 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 22:58:34.310 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 22:58:34.311 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 22:58:34.312 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 22:58:34.323 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242828225684893696, action=1, role=1)
2020-03-25 22:58:34.324  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 22:58:34.324 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 22:58:34.324 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 3(Integer), 3(Integer), 1(String)
2020-03-25 22:58:34.325 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 22:58:34.332 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-9] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 22:58:34.338 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242828225684893696, action=1, role=1)
2020-03-25 22:58:34.339 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 22:58:34.339 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 22:58:34.340 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 3(BigDecimal), 3(BigDecimal), 10000(String)
2020-03-25 22:58:34.341 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 22:58:34.348 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-849] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:58:34.348 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-849] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 22:58:34.349 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-849] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 4(Integer), 3(BigDecimal), 1242828225668116480(String)
2020-03-25 22:58:34.351 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-849] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 22:58:34.351  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-849] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单confirm操作完成================
2020-03-25 22:58:34.361 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:58:34.361  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存确认方法===========
2020-03-25 22:58:34.362 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==>  Preparing: update inventory set lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 22:58:34.362 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==> Parameters: 3(Integer), 1(String)
2020-03-25 22:58:34.364 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.confirm    : <==    Updates: 1
2020-03-25 22:58:34.378 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 22:58:34.379 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行confirm 付款接口===============
2020-03-25 22:58:34.379 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.m.AccountMapper.confirm      : ==>  Preparing: update account set freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 22:58:34.379 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.m.AccountMapper.confirm      : ==> Parameters: 3(BigDecimal), 10000(String)
2020-03-25 22:58:34.380 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.m.AccountMapper.confirm      : <==    Updates: 1
2020-03-25 22:59:48.517  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 22:59:53.769  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 22:59:53.778 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 23:00:03.191 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 23:00:03.192 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 23:00:03.197 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 23:00:04.660  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:01:48.525  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:01:50.933 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 23:01:50.934 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 23:01:50.935 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 23:01:50.934(Timestamp), 1242829050461220864(String), 1(Integer), 1(String), 1(BigDecimal), 1(Integer), 10000(String)
2020-03-25 23:01:50.936 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 23:01:50.936 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 23:01:50.937 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:01:50.937 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 1(BigDecimal), 1242829050461220864(String)
2020-03-25 23:01:50.938 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:01:50.944 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 23:01:50.944 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 23:01:50.945 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 23:01:50.956 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 23:01:50.957 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 23:01:50.958 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 23:01:50.970 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829050469609472, action=1, role=1)
2020-03-25 23:01:50.970  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 23:01:50.970 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 23:01:50.971 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:01:50.972 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-9] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 23:01:50.978 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 23:01:50.984 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829050469609472, action=1, role=1)
2020-03-25 23:01:50.984 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:01:51.997 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:01:51.999 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:01:52.000 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 1(BigDecimal), 1242829050461220864(String)
2020-03-25 23:01:52.000 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 23:01:52.002 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:01:52.002  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-824] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 23:01:52.010 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:01:52.010  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 23:01:52.011 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 23:01:52.011 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:01:52.012 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 23:02:04.669  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:02:29.556  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 23:02:29.557 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:02:29.558 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:02:29.559 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829050469609472, action=1, role=1)
2020-03-25 23:02:29.559 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:02:32.479 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:02:32.483 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:02:32.485 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:02:32.488 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:02:32.490 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 23:02:32.490 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor11-26] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242829050469609472' for key 'PRIMARY'
2020-03-25 23:02:34.425 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 23:02:34.426 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 2(BigDecimal), 2(BigDecimal), 10000(String)
2020-03-25 23:02:34.428 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 23:03:18.252 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 23:03:18.254 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 23:03:18.255 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 23:03:18.253(Timestamp), 1242829416703651840(String), 1(Integer), 1(String), 1(BigDecimal), 1(Integer), 10000(String)
2020-03-25 23:03:18.259 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 23:03:18.260 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 23:03:18.260 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:03:18.261 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 1(BigDecimal), 1242829416703651840(String)
2020-03-25 23:03:18.263 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:03:18.269 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 23:03:18.269 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 23:03:18.270 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 23:03:18.279 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 23:03:18.280 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 23:03:18.281 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 23:03:18.296 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829416733011968, action=1, role=1)
2020-03-25 23:03:18.296  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 23:03:18.296 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 23:03:18.296 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:03:18.298 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-3] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 23:03:18.304 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 23:03:18.316 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829416733011968, action=1, role=1)
2020-03-25 23:03:18.316 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:03:19.325 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-813] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:03:19.326 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-813] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:03:19.325 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-5] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 23:03:19.326 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-813] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 1(BigDecimal), 1242829416703651840(String)
2020-03-25 23:03:19.327 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-813] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:03:19.327  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-813] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 23:03:19.338 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:03:19.339  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 23:03:19.342 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 23:03:19.342 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:03:19.349 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 23:03:48.536  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:03:51.025 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:03:51.029 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:03:51.033 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:03:51.040 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829416733011968, action=1, role=1)
2020-03-25 23:03:51.041 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:03:52.639 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:03:52.642 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:03:52.644 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor9-27] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242829416733011968' for key 'PRIMARY'
2020-03-25 23:03:52.644 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-6] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:04:00.201 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 23:04:00.202 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 23:04:00.202 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 23:04:00.201(Timestamp), 1242829592646316032(String), 1(Integer), 1(String), 1(BigDecimal), 1(Integer), 10000(String)
2020-03-25 23:04:00.204 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 23:04:00.204 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 23:04:00.204 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:04:00.205 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 1(BigDecimal), 1242829592646316032(String)
2020-03-25 23:04:00.216 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:04:00.222 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 23:04:00.222 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 23:04:00.224 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-7] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 23:04:00.243 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 23:04:00.244 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 23:04:00.246 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 23:04:00.257 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829592658898944, action=1, role=1)
2020-03-25 23:04:00.258  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 23:04:00.258 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 23:04:00.258 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:04:00.259 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-7] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 23:04:00.264 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 23:04:00.270 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829592658898944, action=1, role=1)
2020-03-25 23:04:00.270 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:04:01.281 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-822] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:04:01.282 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-822] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:04:01.282 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 23:04:01.282 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-822] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 1(BigDecimal), 1242829592646316032(String)
2020-03-25 23:04:01.284 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-822] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:04:01.284  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-822] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 23:04:01.291 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:04:01.292  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 23:04:01.292 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 23:04:01.293 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:04:01.294 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-8] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 23:04:01.605 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:04:01.608 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:04:01.609 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829592658898944, action=1, role=1)
2020-03-25 23:04:01.610 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:04:02.963 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-9] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:04:02.967 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:04:02.969 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:04:02.971 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor2-25] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242829592658898944' for key 'PRIMARY'
2020-03-25 23:04:02.972 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-8] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:04:04.681  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:04:42.433  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 23:04:43.990 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 23:04:43.991 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 23:04:43.992 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 23:04:43.99(Timestamp), 1242829776310693888(String), 1(Integer), 1(String), 1(BigDecimal), 1(Integer), 10000(String)
2020-03-25 23:04:43.994 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 23:04:43.995 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 23:04:43.995 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:04:43.996 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 1(BigDecimal), 1242829776310693888(String)
2020-03-25 23:04:43.998 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:04:44.004 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 23:04:44.004 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 23:04:44.005 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-10] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 23:04:44.015 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 23:04:44.015 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 23:04:44.017 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-10] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 23:04:44.031 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829776331665408, action=1, role=1)
2020-03-25 23:04:44.031  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 23:04:44.032 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 23:04:44.032 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:04:44.033 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-1] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 23:04:44.038 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 23:04:44.047 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829776331665408, action=1, role=1)
2020-03-25 23:04:44.047 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:04:45.058 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:04:45.059 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:04:45.059 ERROR 13880 --- [http-nio-0.0.0.0-8884-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is com.netflix.hystrix.exception.HystrixRuntimeException: AccountClient#payment(AccountDTO) timed-out and no fallback available.] with root cause

java.util.concurrent.TimeoutException: null
	at com.netflix.hystrix.AbstractCommand.handleTimeoutViaFallback(AbstractCommand.java:997) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand.access$500(AbstractCommand.java:60) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:610) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$12.call(AbstractCommand.java:601) ~[hystrix-core-1.5.12.jar:1.5.12]
	at rx.internal.operators.OperatorOnErrorResumeNextViaFunction$4.onError(OperatorOnErrorResumeNextViaFunction.java:140) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at rx.internal.operators.OnSubscribeDoOnEach$DoOnEachSubscriber.onError(OnSubscribeDoOnEach.java:87) ~[rxjava-1.3.8.jar:1.3.8]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1$1.run(AbstractCommand.java:1154) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:45) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable$1.call(HystrixContextRunnable.java:41) ~[hystrix-core-1.5.12.jar:1.5.12]
	at org.dromara.hmily.springcloud.hystrix.HmilyHystrixConcurrencyStrategy.lambda$wrapCallable$0(HmilyHystrixConcurrencyStrategy.java:86) ~[hmily-springcloud-2.0.5-RELEASE.jar:2.0.5-RELEASE]
	at com.netflix.hystrix.strategy.concurrency.HystrixContextRunnable.run(HystrixContextRunnable.java:61) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.AbstractCommand$HystrixObservableTimeoutOperator$1.tick(AbstractCommand.java:1159) ~[hystrix-core-1.5.12.jar:1.5.12]
	at com.netflix.hystrix.util.HystrixTimer$1.run(HystrixTimer.java:99) ~[hystrix-core-1.5.12.jar:1.5.12]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset$$$capture(FutureTask.java:308) ~[na:1.8.0_121]
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) ~[na:1.8.0_121]
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [na:1.8.0_121]

2020-03-25 23:04:45.059 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 3(Integer), 1(BigDecimal), 1242829776310693888(String)
2020-03-25 23:04:45.061 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:04:45.061  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-815] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单cancel操作完成================
2020-03-25 23:04:45.067 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : tcc cancel ...........start!
2020-03-25 23:04:45.068  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存取消方法===========
2020-03-25 23:04:45.069 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==>  Preparing: update inventory set total_inventory = total_inventory + ?, lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 23:04:45.069 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:04:45.070 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-2] o.d.h.d.s.i.m.InventoryMapper.cancel     : <==    Updates: 1
2020-03-25 23:04:45.819 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:04:45.821 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:04:45.824 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829776331665408, action=1, role=1)
2020-03-25 23:04:45.824 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:04:47.189 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-1] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:04:47.190 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:04:47.193 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:04:47.195 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-2] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:04:47.195 ERROR 13868 --- [hmilyTransaction-hmily-log-disruptor4-28] o.d.h.c.s.r.JdbcCoordinatorRepository    : executeUpdate-> Duplicate entry '1242829776331665408' for key 'PRIMARY'
2020-03-25 23:05:10.887 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.s.impl.OrderServiceImpl      : 构建订单对象
2020-03-25 23:05:10.887 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : ==>  Preparing: insert into `order` (create_time,number,status,product_id,total_amount,count,user_id) values ( ?,?,?,?,?,?,?) 
2020-03-25 23:05:10.888 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : ==> Parameters: 2020-03-25 23:05:10.887(Timestamp), 1242829889124888576(String), 1(Integer), 1(String), 1(BigDecimal), 1(Integer), 10000(String)
2020-03-25 23:05:10.889 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.order.mapper.OrderMapper.save  : <==    Updates: 1
2020-03-25 23:05:10.889 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.c.s.e.HmilyTransactionExecutor     : ......hmily transaction starter....
2020-03-25 23:05:10.890 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:05:10.890 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 2(Integer), 1(BigDecimal), 1242829889124888576(String)
2020-03-25 23:05:10.891 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:05:10.894 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==>  Preparing: select id,user_id,balance, freeze_amount from account where user_id =? limit 1 
2020-03-25 23:05:10.894 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : ==> Parameters: 10000(String)
2020-03-25 23:05:10.895 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-3] o.d.h.d.s.a.m.A.findByUserId             : <==      Total: 1
2020-03-25 23:05:10.905 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.I.findByProductId          : ==>  Preparing: select id,product_id,total_inventory ,lock_inventory from inventory where product_id =? 
2020-03-25 23:05:10.905 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.I.findByProductId          : ==> Parameters: 1(String)
2020-03-25 23:05:10.906 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-4] o.d.h.d.s.i.m.I.findByProductId          : <==      Total: 1
2020-03-25 23:05:10.917 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829889133277184, action=1, role=1)
2020-03-25 23:05:10.918  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========springcloud调用扣减库存decrease===========
2020-03-25 23:05:10.918 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==>  Preparing: update inventory set total_inventory = total_inventory - ?, lock_inventory= lock_inventory + ? where product_id =? and total_inventory >0 
2020-03-25 23:05:10.918 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.decrease   : ==> Parameters: 1(Integer), 1(Integer), 1(String)
2020-03-25 23:05:10.920 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-5] o.d.h.d.s.i.m.InventoryMapper.decrease   : <==    Updates: 1
2020-03-25 23:05:10.925 DEBUG 13880 --- [http-nio-0.0.0.0-8884-exec-1] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : ===========执行springcloud扣减资金接口==========
2020-03-25 23:05:10.931 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.c.s.e.HmilyTransactionExecutor     : participant hmily transaction start..：HmilyTransactionContext(transId=1242829889133277184, action=1, role=1)
2020-03-25 23:05:10.931 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行try付款接口===============
2020-03-25 23:05:10.932 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.mapper.AccountMapper.update  : ==>  Preparing: update account set balance = balance - ?, freeze_amount= freeze_amount + ? ,update_time = now() where user_id =? and balance > 0 
2020-03-25 23:05:10.932 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.mapper.AccountMapper.update  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:05:10.933 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-4] o.d.h.d.s.a.mapper.AccountMapper.update  : <==    Updates: 1
2020-03-25 23:05:10.940 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-805] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 23:05:10.940 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-805] o.d.h.d.s.o.mapper.OrderMapper.update    : ==>  Preparing: update `order` set status = ? , total_amount=? where number=? 
2020-03-25 23:05:10.941 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-805] o.d.h.d.s.o.mapper.OrderMapper.update    : ==> Parameters: 4(Integer), 1(BigDecimal), 1242829889124888576(String)
2020-03-25 23:05:10.942 DEBUG 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-805] o.d.h.d.s.o.mapper.OrderMapper.update    : <==    Updates: 1
2020-03-25 23:05:10.942  INFO 13880 --- [hmilyTransaction-disruptor_consumer_HmilyConsumerTransactionDataHandler-805] o.d.h.d.s.o.s.impl.PaymentServiceImpl    : =========进行订单confirm操作完成================
2020-03-25 23:05:10.949 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 23:05:10.949  INFO 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.s.impl.InventoryServiceImpl  : ==========Springcloud调用扣减库存确认方法===========
2020-03-25 23:05:10.950 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==>  Preparing: update inventory set lock_inventory= lock_inventory - ? where product_id =? and lock_inventory >0 
2020-03-25 23:05:10.950 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.confirm    : ==> Parameters: 1(Integer), 1(String)
2020-03-25 23:05:10.952 DEBUG 13876 --- [http-nio-0.0.0.0-8883-exec-6] o.d.h.d.s.i.m.InventoryMapper.confirm    : <==    Updates: 1
2020-03-25 23:05:10.973 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.c.s.e.HmilyTransactionExecutor     : hmily transaction confirm .......！start
2020-03-25 23:05:10.974 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行confirm 付款接口===============
2020-03-25 23:05:10.974 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.AccountMapper.confirm      : ==>  Preparing: update account set freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 23:05:10.974 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.AccountMapper.confirm      : ==> Parameters: 1(BigDecimal), 10000(String)
2020-03-25 23:05:10.975 DEBUG 13868 --- [http-nio-0.0.0.0-8885-exec-5] o.d.h.d.s.a.m.AccountMapper.confirm      : <==    Updates: 1
2020-03-25 23:05:48.547  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:06:04.689  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:06:50.448  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 23:06:50.459 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 23:06:57.695 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 23:06:57.697 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:06:57.700 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 23:07:48.556  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:08:04.698  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:09:05.707  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 23:09:05.718 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 23:09:09.048 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 23:09:09.050 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:09:09.053 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 23:09:09.062 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 23:09:10.041 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 23:09:10.044 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:09:10.047 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 23:09:10.057 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.s.impl.AccountServiceImpl    : ============执行cancel 付款接口===============
2020-03-25 23:09:10.790 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==>  Preparing: update account set balance = balance + ?, freeze_amount= freeze_amount - ? where user_id =? and freeze_amount >0 
2020-03-25 23:09:10.792 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : ==> Parameters: 1(BigDecimal), 1(BigDecimal), 10000(String)
2020-03-25 23:09:10.797 DEBUG 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] o.d.h.d.s.a.mapper.AccountMapper.cancel  : <==    Updates: 1
2020-03-25 23:09:48.565  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:10:04.707  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:11:18.809  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 23:11:48.573  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:12:04.714  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:13:26.816  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 23:13:48.585  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:14:04.720  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:15:34.832  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
2020-03-25 23:15:48.599  INFO 13876 --- [hmilyTransaction-hmily-transaction-self-recovery-2] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:16:04.738  INFO 13880 --- [hmilyTransaction-hmily-transaction-self-recovery-202] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:120
2020-03-25 23:17:42.838  INFO 13868 --- [hmilyTransaction-hmily-transaction-self-recovery-18] .s.HmilyTransactionSelfRecoveryScheduled : self recovery execute delayTime:128
